uninstall_gaming_dependencies() {
    # List of packages to potentially remove
    packages=(steam lutris winetricks gamemode giflib lib32-giflib libpng lib32-libpng libldap lib32-libpulse \
              lib32-libldap mpg123 lib32-mpg123 openal lib32-openal v4l-utils lib32-v4l-utils \
              libgpg-error lib32-libgpg-error libjpeg-turbo lib32-libjpeg-turbo sqlite lib32-sqlite libxcomposite \
              lib32-libxcomposite libxinerama lib32-libxinerama ncurses lib32-ncurses libxslt lib32-libxslt libva \
              lib32-libva gst-plugins-base-libs lib32-gst-plugins-base-libs mangohud lib32-mangohud goverlay gamescope)

    # Check and remove only orphaned packages
    for pkg in "${packages[@]}"; do
        if yay -Qi $pkg &>/dev/null; then  # Check if package is installed
            if ! yay -Qi $pkg | grep -q "Required By     : None"; then  # Check if no other packages require it
                echo -e "${YELLOW}Skipping $pkg as it is required by other packages.${NC}"
            else
                yay -Rns $pkg --noconfirm
                echo -e "${GREEN}Removed $pkg${NC}"
            fi
        else
            echo -e "${RED}$pkg is not installed.${NC}"
        fi
    done

    echo -e "${GREEN}Uninstallation of safe packages completed.${NC}"
} 